<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
	<ui:composition template="../layouts/layout-doctor.xhtml">
     	<ui:define name="content">
     		<div class="row">
     			<div class="col-9">
     				<p:card styleClass="w-100">
     					<div class="row mb-4">
     						<div class="col-12">
     							<div classs="d-flex justify-content-start">
     								<h3>Expediente médico</h3>
     							</div>
     						</div>
     					</div>
     					<div class="row">
     						<div class="col-12">
     							<div classs="d-flex justify-content-end">
     								<p:button href="/expediente/nuevo" value="Agregar nuevo registro" styleClass="rounded-button width-max-content" >
     									<f:param value="#{pacienteExpedienteController.paciente.pacienteId}" name="pacienteId" />
     								</p:button>
     							</div>
     						</div>
     					</div>
	                    <div class="row">
	                    	<div class="col-12">
	                    		<p:dataTable id="tabla" var="exp" value="#{pacienteExpedienteController.expediente}" rows="10"
	                    			emptyMessage="No se encontraron diagnosticos previos"
				                     paginator="true"
				                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				                     currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
				                     rowsPerPageTemplate="5,10,{ShowAll|'All'}">
									<p:column>
										<f:facet name="header">Registro</f:facet>
										<h:outputText value="#{exp.registros}" />
									</p:column>
					
									<p:column>
										<f:facet name="header">Fecha de registro</f:facet>
										<h:outputText value="#{exp.fechaRegistro}" >
										    <f:convertDateTime pattern="yyyy-MM-dd" />
										</h:outputText>
									</p:column>
								</p:dataTable>
	                    	</div>
	                    </div>
     				</p:card>
     			</div>
     			<div class="col-3">
     				<h:panelGrid columns="1" id="panelgrif2" >
						<p:card styleClass="w-100">
							<f:facet name="header">
		                        <p:avatar style="background-color: lightseagreen; color: white;" label="#{pacienteExpedienteController.paciente.nombrePaciente.substring(0,1)} #{pacienteExpedienteController.paciente.apellidoPaciente.substring(0,1)}"  size="xlarge"/>
		                    </f:facet>
		                    <f:facet name="title">
		                    	<center>
		                    		#{pacienteExpedienteController.paciente.nombrePaciente}
		                    		<br/>
		                    		#{pacienteExpedienteController.paciente.apellidoPaciente}
		                    	</center>
		                    	<p:divider />
		                    </f:facet>
		                    <center>
		                    	<p>
	      							<c:choose>
	      								<c:when test="${pacienteExpedienteController.paciente.sexo == 'M'}">
	      									Masculino
	      								</c:when>
	      								<c:when test="${pacienteExpedienteController.paciente.sexo == 'F'}">
	      									Femenino
	      								</c:when>
	      								<c:otherwise>
	      									Sin especificar
	      								</c:otherwise>
	      							</c:choose>
	      						</p>
	      						<p>
				                    <h:outputText value="#{pacienteExpedienteController.paciente.fechaNacimiento}" >
									    <f:convertDateTime pattern="yyyy-MM-dd" />
									</h:outputText> (#{pacienteExpedienteController.edad} años)
			                    </p>
			                    <p>#{pacienteExpedienteController.paciente.duiPaciente}</p>
		                    	<p>#{pacienteExpedienteController.paciente.telefono}</p>
		                    </center>
						</p:card>
					</h:panelGrid>
     			</div>
     		</div>
     	</ui:define>
     </ui:composition>
</html>